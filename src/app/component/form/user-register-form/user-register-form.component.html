<div class=container >
  <h2 class="mt-3"><i class="bi bi-plus-circle"></i> Créer un compte</h2>
  <div class="container">
    <form #f="ngForm" class="row g-3">
      <div class="row mt-3 mb-3">
        <div class="col-md-3">
          <label for="role" class="form-label">Rôle<span style="color: red"> *</span></label>
          <select class="form-select" aria-label="role" id="role" name="role"
                  required
                  [(ngModel)]="role"
                  #roles="ngModel">
            <option disabled selected [ngValue]="undefined">Choisir ...</option>
            <option *ngFor="let object of userRoles" [ngValue]="object.role">
              {{ object.name }}
            </option>
          </select>
          <div *ngIf="roles.invalid && (roles.dirty || roles.touched)" class="mt-1">
          <span *ngIf="roles.errors.required" class="form-text text-danger">
            <i class="bi bi-exclamation-circle"></i> Role est requis.
          </span>
          </div>
        </div>
      </div>
      <div class="row mb-3">
        <div class="col-md-4">
          <label for="firstName" class="form-label">Prénom<span style="color: red"> *</span></label>
          <input type="text" class="form-control" id="firstName" name="firstName"
                 required
                 #firstname = "ngModel"
                 pattern="[a-zA-Z_][a-zA-Z0-9_]*"
                 minlength="4"
                 [(ngModel)]="user.firstName">
          <div *ngIf="firstname.invalid && (firstname.dirty || firstname.touched)" class="mt-1">
            <span *ngIf="firstname.errors.required" class="form-text text-danger">
              <i class="bi bi-exclamation-circle"></i> Prénom est requis.
            </span>
            <span *ngIf="firstname.errors.pattern" class="form-text text-danger">
              <i class="bi bi-exclamation-circle"></i> Le premier caractère ne peut pas être un nombre ou un caractère spéciale.
            </span>
            <span *ngIf="firstname.errors.minlength && !firstname.errors.pattern" class="form-text text-danger">
              <i class="bi bi-exclamation-circle"></i> Le prénom doit contenir au moins 4 caractères.
            </span>
          </div>
        </div>
        <div class="col-md-4">
          <label for="lastName" class="form-label">Nom<span style="color: red"> *</span></label>
          <input type="text" class="form-control" id="lastName" name="lastName"
                 required
                 pattern="[a-zA-Z_][a-zA-Z0-9_]*"
                 minlength="4"
                 #lastName = "ngModel"
                 [(ngModel)]="user.lastName">
          <div *ngIf="lastName.invalid && (lastName.dirty || lastName.touched)" class="mt-1">
          <span *ngIf="lastName.errors.required" class="form-text text-danger">
            <i class="bi bi-exclamation-circle"></i> Nom est requis.
          </span>
          <span *ngIf="lastName.errors.pattern" class="form-text text-danger">
            <i class="bi bi-exclamation-circle"></i> Le premier caractère ne peut pas être un nombre ou un caractère spéciale.
          </span>
          <span *ngIf="lastName.errors.minlength && !lastName.errors.pattern" class="form-text text-danger">
            <i class="bi bi-exclamation-circle"></i> Le nom doit contenir au moins 4 caractères.
          </span>
          </div>
        </div>
        <div class="col-md-4">
          <label for="email" class="form-label">Email<span style="color: red"> *</span></label>
          <input type="email" class="form-control" id="email" name="email"
                 required
                 #email= "ngModel"
                 placeholder="name@example.com"
                 pattern="^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$"
                 [(ngModel)]="user.email">
          <div *ngIf="email.invalid && (email.dirty || email.touched)" class="mt-1">
          <span *ngIf="email.errors.required" class="form-text text-danger">
            <i class="bi bi-exclamation-circle"></i> Email est requis.
          </span>
            <span *ngIf="email.errors.pattern" class="form-text text-danger">
            <i class="bi bi-exclamation-circle"></i> Email non valide.
          </span>
          </div>
        </div>
      </div>
      <div class="row mb-3">
        <div class="col-md-4">
          <label for="dateOfBirth" class="form-label">Date de naissance<span style="color: red"> *</span></label>
          <input type="date" class="form-control" id="dateOfBirth" name="dateOfBirth"
                 required
                 #date= "ngModel"
                 pattern="[0-9]{4}-[0-9]{2}-[0-9]{2}"
                 [(ngModel)]="user.dateOfBirth">
          <div *ngIf="date.invalid && (date.dirty || date.touched)" class="mt-1">
          <span *ngIf="date.errors.required" class="form-text text-danger">
            <i class="bi bi-exclamation-circle"></i> Date de naissance est requise.
          </span>
            <span *ngIf="date.errors.pattern" class="form-text text-danger">
            <i class="bi bi-exclamation-circle"></i> Date de naissance invaldie.
          </span>
          </div>
        </div>
        <div class="col-md-5" *ngIf="role == 'ROLE_DR'">
          <label for="spes" class="form-label">Spécialité médicale<span style="color: red"> *</span></label>
          <select class="form-select" aria-label="role" id="spes" name="spes"
                  required
                  [(ngModel)]="specialty"
                  #spes="ngModel">
            <option disabled selected [ngValue]="undefined">Choisir ...</option>
            <option *ngFor="let object of specialtesDr" [ngValue]="object">
              {{ object.name }}
            </option>
          </select>
          <div *ngIf="spes.invalid && (spes.dirty || spes.touched)" class="mt-1">
          <span *ngIf="spes.errors.required" class="form-text text-danger">
            <i class="bi bi-exclamation-circle"></i> Nom laboratoire est requis.
          </span>
          </div>
        </div>
        <div class="col-md-4" *ngIf="role == 'ROLE_LAB'">
          <label for="lab" class="form-label">Nom Laboratoire<span style="color: red"> *</span></label>
          <input type="text" class="form-control" id="lab" name="lab"
                 required
                 #lab= "ngModel"
                 [(ngModel)]="user.nameLab"
                  >
          <div *ngIf="lab.invalid && (lab.dirty || lab.touched)" class="mt-1">
          <span *ngIf="lab.errors.required" class="form-text text-danger">
            <i class="bi bi-exclamation-circle"></i> Nom laboratoire est requis.
          </span>
          </div>
        </div>
      </div>
      <div class="row mb-3">
        <div class="col-md-4">
          <label for="password" class="form-label">Password<span style="color: red"> *</span></label>
          <input type="password" class="form-control" id="password" name="password"
                 required
                 #password= "ngModel"
                 minlength="8"
                 [(ngModel)]="user.password">
          <div *ngIf="password.pristine" id="passwordHelp" class="form-text"><i class="bi bi-info-circle"></i> Password doit contenir au moins 8 caractères.</div>
          <div *ngIf="password.invalid && (password.dirty || password.touched)" class="mt-1">
          <span *ngIf="password.errors.required" class="form-text text-danger">
            <i class="bi bi-exclamation-circle"></i> Password est requise.
          </span>
            <span *ngIf="password.errors.minlength" class=" form-text text-danger">
             <i class="bi bi-exclamation-circle"></i> Password non valide.
          </span>
          </div>
        </div>
      </div>
      <div class="col-12 mb-3">
        <button type="submit" class="btn btn-success"  (click)="addUser()" [disabled]="f.invalid  "><i class="bi bi-plus-circle"></i> Ajouter</button>
      </div>
    </form>
  </div>
</div>


